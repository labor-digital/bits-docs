<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lifecycle | Bits - A reactive JS micro framework</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Only a little bit inspired by vue.js">
    
    <link rel="preload" href="/assets/css/styles.styles.4d89bd9c.css" as="style"><link rel="preload" href="/assets/js/app.e331db78.js" as="script"><link rel="preload" href="/assets/js/0.f352c89b.js" as="script"><link rel="preload" href="/assets/js/22.4ffd0dfc.js" as="script"><link rel="preload" href="/assets/js/1.a869a7bd.js" as="script"><link rel="prefetch" href="/assets/js/10.8772cc39.js"><link rel="prefetch" href="/assets/js/11.3e4c5fb6.js"><link rel="prefetch" href="/assets/js/12.512c1cca.js"><link rel="prefetch" href="/assets/js/13.c8f0369f.js"><link rel="prefetch" href="/assets/js/14.090e5324.js"><link rel="prefetch" href="/assets/js/15.fd39cef7.js"><link rel="prefetch" href="/assets/js/16.27999350.js"><link rel="prefetch" href="/assets/js/17.3585fe35.js"><link rel="prefetch" href="/assets/js/18.a5a493b8.js"><link rel="prefetch" href="/assets/js/19.a68ef9d2.js"><link rel="prefetch" href="/assets/js/2.8b756a75.js"><link rel="prefetch" href="/assets/js/20.70b6420d.js"><link rel="prefetch" href="/assets/js/21.a4ca4dd9.js"><link rel="prefetch" href="/assets/js/23.20eea571.js"><link rel="prefetch" href="/assets/js/24.e21fe40c.js"><link rel="prefetch" href="/assets/js/25.9f8224f1.js"><link rel="prefetch" href="/assets/js/26.e98a82b1.js"><link rel="prefetch" href="/assets/js/27.1b8b0c60.js"><link rel="prefetch" href="/assets/js/3.da1af405.js"><link rel="prefetch" href="/assets/js/4.756100b3.js"><link rel="prefetch" href="/assets/js/5.fc2fb5be.js"><link rel="prefetch" href="/assets/js/6.f4b6c13d.js"><link rel="prefetch" href="/assets/js/7.057ed5ca.js"><link rel="prefetch" href="/assets/js/8.93a7f610.js"><link rel="prefetch" href="/assets/js/9.7a93e3ea.js">
    <link rel="stylesheet" href="/assets/css/styles.styles.4d89bd9c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Bits - A reactive JS micro framework</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/api/" class="nav-link">
  API
</a></div> <a href="https://github.com/labor-digital/bits" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/api/" class="nav-link">
  API
</a></div> <a href="https://github.com/labor-digital/bits" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/guide/" aria-current="page" class="sidebar-link">Getting started</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Essentials</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/essentials/Lifecycle.html" aria-current="page" class="active sidebar-link">Lifecycle</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/essentials/Lifecycle.html#bit-boot-up" class="sidebar-link">Bit boot-up</a></li><li class="sidebar-sub-header"><a href="/guide/essentials/Lifecycle.html#bit-destruction" class="sidebar-link">Bit destruction</a></li><li class="sidebar-sub-header"><a href="/guide/essentials/Lifecycle.html#dom-binding-and-keep-alive" class="sidebar-link">DOM binding and keep-alive</a></li><li class="sidebar-sub-header"><a href="/guide/essentials/Lifecycle.html#available-hooks" class="sidebar-link">Available hooks</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/essentials/Lifecycle.html#created" class="sidebar-link">created</a></li><li class="sidebar-sub-header"><a href="/guide/essentials/Lifecycle.html#mounted" class="sidebar-link">mounted</a></li><li class="sidebar-sub-header"><a href="/guide/essentials/Lifecycle.html#unmounted" class="sidebar-link">unmounted</a></li><li class="sidebar-sub-header"><a href="/guide/essentials/Lifecycle.html#remounted" class="sidebar-link">remounted</a></li><li class="sidebar-sub-header"><a href="/guide/essentials/Lifecycle.html#beforedestroy" class="sidebar-link">beforeDestroy</a></li><li class="sidebar-sub-header"><a href="/guide/essentials/Lifecycle.html#destroyed" class="sidebar-link">destroyed</a></li><li class="sidebar-sub-header"><a href="/guide/essentials/Lifecycle.html#domchanged" class="sidebar-link">domChanged</a></li></ul></li><li class="sidebar-sub-header"><a href="/guide/essentials/Lifecycle.html#app-lifecycle" class="sidebar-link">App Lifecycle</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/essentials/Lifecycle.html#created-2" class="sidebar-link">created</a></li><li class="sidebar-sub-header"><a href="/guide/essentials/Lifecycle.html#mounted-2" class="sidebar-link">mounted</a></li></ul></li></ul></li><li><a href="/guide/essentials/Reactivity.html" class="sidebar-link">Reactivity &amp; DOM binding</a></li><li><a href="/guide/essentials/DomAccess.html" class="sidebar-link">Accessing the DOM</a></li><li><a href="/guide/essentials/ClassAndStyle.html" class="sidebar-link">Class and style bindings</a></li><li><a href="/guide/essentials/FormBinding.html" class="sidebar-link">Form binding</a></li><li><a href="/guide/essentials/ConditionalRendering.html" class="sidebar-link">Conditional Rendering</a></li><li><a href="/guide/essentials/EventsAndProxy.html" class="sidebar-link">Events and $proxy</a></li><li><a href="/guide/essentials/DependencyInjection.html" class="sidebar-link">Dependency Injection</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Advanced</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/advanced/AdvancedReactivity.html" class="sidebar-link">Advanced reactivity</a></li><li><a href="/guide/advanced/BitInteraction.html" class="sidebar-link">Bit interaction</a></li><li><a href="/guide/advanced/HtmlAndTemplates.html" class="sidebar-link">HTML and Templates</a></li><li><a href="/guide/advanced/Directives.html" class="sidebar-link">Directives</a></li><li><a href="/guide/advanced/AsyncBits.html" class="sidebar-link">Async Bits</a></li><li><a href="/guide/advanced/Mixins.html" class="sidebar-link">Mixins</a></li><li><a href="/guide/advanced/HotReload.html" class="sidebar-link">Hot Reload</a></li><li><a href="/guide/advanced/CodeTemplate.html" class="sidebar-link">Code template</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Plugins</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/plugins/WritePlugins.html" class="sidebar-link">Write Plugins</a></li><li><a href="/guide/plugins/Translator.html" class="sidebar-link">Translator</a></li><li><a href="/guide/plugins/LitHtml.html" class="sidebar-link">Lit Html</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="lifecycle"><a href="#lifecycle" class="header-anchor">#</a> Lifecycle</h1> <p>Lifecycle hooks allow you to perform certain actions at key points of the bit execution.
That makes it easy to bind your event listeners, modify the dom or clean up when the bit is destroyed.</p> <p>In this example you can see how and when lifecycle hooks are emitted.</p> <div class="preview" data-v-5fb73310><a href="/demo/examples/essentials-lifecycle.html" target="_blank" class="preview__link" data-v-5fb73310>Open the example in a new tab</a> <iframe src="/demo/examples/essentials-lifecycle.html" style="height:450px;" data-v-5fb73310></iframe></div> <h2 id="bit-boot-up"><a href="#bit-boot-up" class="header-anchor">#</a> Bit boot-up</h2> <p>The bit classes you write are no real web components, but instead only classes that are glued to a DOM node
through the <code>b-mount</code> tag. This means the boot process is handled by the mount in the following order:</p> <ul><li>Browser executes the connectedCallback() method on the mount element</li> <li>The Mount.connect() method is executed by the adapter</li> <li>Two possible cases can occur:
<ol><li>The bit class constructor gets resolved through the bit registry of the app.
<ul><li>The bit instance is created</li> <li>&quot;created&quot; lifecycle hook is executed</li> <li>The reactivity provider is bound to the instance</li> <li>The instance gets connected to the DOM through the binder</li> <li>The content of &quot;innerHTML&quot; of the mount node gets cloned and stored for the destruction</li> <li>&quot;mounted&quot; lifecycle hook is executed</li> <li>Static &quot;autoRun&quot; methods (decorated using @AutoRun) are executed</li></ul></li> <li>The mount node has the &quot;keep-alive&quot; attribute, and holds already existing bit instance.
<ul><li>The mount re-uses the already stored bit instance</li> <li>&quot;remounted&quot; lifecycle hook is executed</li></ul></li></ol></li></ul> <p>After this point your bit is considered &quot;running&quot; and can react to data-changes and DOM-events.</p> <h2 id="bit-destruction"><a href="#bit-destruction" class="header-anchor">#</a> Bit destruction</h2> <ul><li>Browser executes the disconnectedCallback() method on the mount element</li> <li>The Mount.disconnect() method is executed by the adapter</li> <li>&quot;unmounted&quot; lifecycle hook is executed</li> <li>Two possible cases can occur:
<ol><li>The <code>b-mount</code> has the &quot;keep-alive&quot; attribute set to any value.
<ul><li>The bit instance and all dom bindings are kept alive and wait for a rebinding later.</li></ul></li> <li>The bit instance will be destroyed
<ul><li>&quot;beforeDestroy&quot; lifecycle hook is executed</li> <li>The reactivity provider pulls down the data-binding</li> <li>DOM-binding and event handlers are disconnected by the binder</li> <li>The $proxy instance is destroyed and unlinks all dependencies.</li> <li>The bit $context is destroyed</li> <li>&quot;destroyed&quot; lifecycle hook is executed.</li> <li>The &quot;innerHTML&quot; of the mount point will be reset
to the original state we stored in the boot-up process.
(We do this, so if the node is rebound, the instance will be bound to the original HTML without having to deal with a possibly modified DOM of previous incarnations).</li></ul></li></ol></li></ul> <p>At this point all references to the outside world should be severed, and the
instance will be flushed by the garbage collector.</p> <h2 id="dom-binding-and-keep-alive"><a href="#dom-binding-and-keep-alive" class="header-anchor">#</a> DOM binding and keep-alive</h2> <p>By default, the bit instance is destroyed when the bound <code>b-mount</code> was disconnected from the dom.
This happens if you either remove the node, <strong>OR EVEN</strong> if you <strong>move</strong> it to another location in the dom tree (using appendChild() for example).</p> <p>If you know, that you want to reuse the bit after you moved it around,
simply add the &quot;keep-alive&quot; attribute with any content to the mount tag.
That ensures that the bit instance, and the innerHTML of the mount node stay alive
until you rebind it again to the DOM.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Make sure not to over-use this feature! Every bit kept-alive will hold on to its mount and child DOM nodes. Meaning neither the node, nor
the bit itself will be deleted by the garbage collector.</p></div> <h2 id="available-hooks"><a href="#available-hooks" class="header-anchor">#</a> Available hooks</h2> <p>All lifecycle hook methods act as normal methods on your bit object. This means that the
bit instance is already bound to the <code>this</code> context. Please keep in mind, that there in &quot;created&quot;
the DOM is not yet bound, and in &quot;destroyed&quot; the instance is already destroyed, plus you don't have access to $el or the $context anymore.</p> <h3 id="created"><a href="#created" class="header-anchor">#</a> created</h3> <p>Executed immediately after the bit instance was created. There is no data reactivity or dom binding yet.
I would suggest, to see this as your constructor, to set up dependencies that you need in your bit.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>While it is possible to override the constructor of the bit class, I would suggest not to do that. Please refer to the &quot;created&quot; hook instead.</p></div> <h3 id="mounted"><a href="#mounted" class="header-anchor">#</a> mounted</h3> <p>This is probably your &quot;go-to&quot; lifecycle hook, as it is executed when the bit was connected to the DOM the <strong>first time</strong>.
All data reactivity has been set up and statically defined event listeners have been bound.</p> <h3 id="unmounted"><a href="#unmounted" class="header-anchor">#</a> unmounted</h3> <p>The bit is technically still alive but was disconnected from the dom. You can use this hook to remove global event listeners,
that were not bound using the $on() method of your bit.</p> <h3 id="remounted"><a href="#remounted" class="header-anchor">#</a> remounted</h3> <p>Behaves exactly like &quot;mounted&quot; but with the exception, that the bit was already part of the DOM and got removed beforehand (keep-alive was used).</p> <h3 id="beforedestroy"><a href="#beforedestroy" class="header-anchor">#</a> beforeDestroy</h3> <p>The bit is about to be destroyed and already disconnected from the dom.
This allows you to pull-down any dependencies before all connections to the outside world are cut.</p> <h3 id="destroyed"><a href="#destroyed" class="header-anchor">#</a> destroyed</h3> <p>The data-binding and DOM connections are cut, the <code>$el</code> as well as <code>$context</code> and <code>$proxy</code> are unlinked.
The content of the <code>b-mount</code> has been restored to its initial state when the bit was created.</p> <h3 id="domchanged"><a href="#domchanged" class="header-anchor">#</a> domChanged</h3> <p>This is more or less a &quot;pseudo&quot; lifecycle hook, as it is not really part of the lifecycle but more of a
wildcard event handler. It is executed if either the current, or a child bit executed the <code>$domChanged()</code> method.
That will emit an event which bubbles up the DOM tree and tells all bits on the way that they should refresh
their DOM bindings. This is used if you modify the dom manually/from an external source, and now want the bits to bind themselfs again.</p> <h2 id="app-lifecycle"><a href="#app-lifecycle" class="header-anchor">#</a> App Lifecycle</h2> <p>Similar to a single bit, the bit app itself has some lifecycle hooks
which you can use either directly (through the app config), or when
writing <a href="/guide/plugins/WritePlugins.html">plugins</a>.</p> <h3 id="created-2"><a href="#created-2" class="header-anchor">#</a> created</h3> <p>Executed when the app gets created, right after the options have been
validated, and the dependency injection container was created.
Configured through <code>new BitApp({hooks: {created: () =&gt; {}}});</code></p> <h3 id="mounted-2"><a href="#mounted-2" class="header-anchor">#</a> mounted</h3> <p>Executed after the app was mounted on the DOM and the bit instances
have been created.
Configured through <code>new BitApp({hooks: {mounted: () =&gt; {}}});</code></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/labor-digital/bits-docs/edit/master/docs/guide/essentials/Lifecycle.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/" class="prev router-link-active">
        Getting started
      </a></span> <span class="next"><a href="/guide/essentials/Reactivity.html">
        Reactivity &amp; DOM binding
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.e331db78.js" defer></script><script src="/assets/js/0.f352c89b.js" defer></script><script src="/assets/js/22.4ffd0dfc.js" defer></script><script src="/assets/js/1.a869a7bd.js" defer></script>
  </body>
</html>
